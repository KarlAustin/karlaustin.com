<!DOCTYPE HTML>

<html>
    <head>
        
            
                <title>Peertools: Automated notification of unsolicited BGP Open requests at peering points</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.33" />
        


        
        
            <meta name="description" content="An automated tool for sending email notifications to ISPs sending BGP Open requests to your routers on a peering point.">
        

        <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Peertools: Automated notification of unsolicited BGP Open requests at peering points"/>
<meta name="twitter:description" content="An automated tool for sending email notifications to ISPs sending BGP Open requests to your routers on a peering point."/>
<meta name="twitter:site" content="@karlaustin"/>

        <meta property="og:title" content="Peertools: Automated notification of unsolicited BGP Open requests at peering points" />
<meta property="og:description" content="An automated tool for sending email notifications to ISPs sending BGP Open requests to your routers on a peering point." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://karlaustin.com/post/peertools-automating-notification-of-potential-peers/" />



<meta property="article:published_time" content="2017-03-04T18:41:30&#43;00:00"/>

<meta property="article:modified_time" content="2017-03-04T18:41:30&#43;00:00"/>











        
<meta itemprop="name" content="Peertools: Automated notification of unsolicited BGP Open requests at peering points">
<meta itemprop="description" content="An automated tool for sending email notifications to ISPs sending BGP Open requests to your routers on a peering point.">


<meta itemprop="datePublished" content="2017-03-04T18:41:30&#43;00:00" />
<meta itemprop="dateModified" content="2017-03-04T18:41:30&#43;00:00" />
<meta itemprop="wordCount" content="479">



<meta itemprop="keywords" content="internet,peering,linx,bgp," />

        

        
            
        

        
        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css">
            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/add-on.css">
        

        

      
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-75661737-1', 'auto');
ga('send', 'pageview');
</script>

    </head>
    <body>

      
      <div id="wrapper">

    
    
<header id="header">
    
      <h1><a href="/">Karl Austin</a></h1>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/post">
                            <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                    </a>
                </li>
            
                <li>
                    <a href="/categories">
                            <i class="">&nbsp;</i>Categories
                    </a>
                </li>
            
                <li>
                    <a href="/about">
                            <i class="">&nbsp;</i>About
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="as_sitesearch" value="https://karlaustin.com/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="as_sitesearch" value="https://karlaustin.com/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/post">
                            <h3>
                                <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            <h3>
                                <i class="">&nbsp;</i>Categories
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/about">
                            <h3>
                                <i class="">&nbsp;</i>About
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section id="recent-posts">
            <div class="mini-posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                

                
                    
                

                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/post/juniper-vmx-centos-i40e-issues/">Juniper vMX CentOS i40e Driver Issues</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-01-19'>
                                    January 19, 2018</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/post/negotiating-with-a-threenager/">Negotiating With A Threenager</a></h3>
                                
                                <time class="published" datetime=
                                    '2017-03-11'>
                                    March 11, 2017</time>
                            </header>
                            

                        </article>
                

                
                    <a href=
                        
                            /post/
                        
                        class="button">View more posts</a>
                
            </div>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            


<li>
  <a href="//twitter.com/share?url=https%3a%2f%2fkarlaustin.com%2fpost%2fpeertools-automating-notification-of-potential-peers%2f&text=Peertools%3a%20Automated%20notification%20of%20unsolicited%20BGP%20Open%20requests%20at%20peering%20points&via=karlaustin" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
    </a>
</li>


<li>
  <a href="//plus.google.com/share?url=https%3a%2f%2fkarlaustin.com%2fpost%2fpeertools-automating-notification-of-potential-peers%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
  </a>
</li>


<li>
  <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fkarlaustin.com%2fpost%2fpeertools-automating-notification-of-potential-peers%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>


<li>
  <a href="//reddit.com/submit?url=https%3a%2f%2fkarlaustin.com%2fpost%2fpeertools-automating-notification-of-potential-peers%2f&title=Peertools%3a%20Automated%20notification%20of%20unsolicited%20BGP%20Open%20requests%20at%20peering%20points" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
  </a>
</li>


<li>
  <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fkarlaustin.com%2fpost%2fpeertools-automating-notification-of-potential-peers%2f&title=Peertools%3a%20Automated%20notification%20of%20unsolicited%20BGP%20Open%20requests%20at%20peering%20points" target="_blank" class="share-btn linkedin">
      <i class="fa fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>


<li>
  <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fkarlaustin.com%2fpost%2fpeertools-automating-notification-of-potential-peers%2f&title=Peertools%3a%20Automated%20notification%20of%20unsolicited%20BGP%20Open%20requests%20at%20peering%20points" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
  </a>
</li>


<li>
  <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fkarlaustin.com%2fpost%2fpeertools-automating-notification-of-potential-peers%2f&description=Peertools%3a%20Automated%20notification%20of%20unsolicited%20BGP%20Open%20requests%20at%20peering%20points" target="_blank" class="share-btn pinterest">
    <i class="fa fa-pinterest-p"></i>
    <p>Pinterest</p>
  </a>
</li>


<li>
  <a href="mailto:?subject=Check out this post by &body=https%3a%2f%2fkarlaustin.com%2fpost%2fpeertools-automating-notification-of-potential-peers%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
  </a>
</li>

        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
  <header>
    <div class="title">
        
            <h1><a href="/post/peertools-automating-notification-of-potential-peers/">Peertools: Automated notification of unsolicited BGP Open requests at peering points</a></h1>
            
        
        
            <p>An automated tool for sending email notifications to ISPs sending BGP Open requests to your routers on a peering point.</p>
        
    </div>
    <div class="meta">
        

        <time class="published"
            datetime='2017-03-04'>
            March 4, 2017</time>
        <span class="author"></span>
        
            <p>3 minute read</p>
        
        
    </div>
</header>


  

  

  <div id="content">
    

<h1 id="the-problem">The Problem</h1>

<p>When you connect to an internet peering exchange, the IP addresses you&rsquo;re given for your interfaces will most likely have been used by someone else prior to you, that has left the exchange.</p>

<p>This means, because we&rsquo;re not all good at housekeeping, that you&rsquo;ll end up with ISPs trying to open up BGP sessions with your routers and if you&rsquo;re not firewalling them out then you&rsquo;ll end up with a lot of messages about BGP Opens being received from unconfigured neighbours.  If you&rsquo;re firewalling (and you should be) and you&rsquo;re logging you&rsquo;ll end up with a lot of hits logged against port 179.</p>

<h1 id="the-solution">The Solution</h1>

<p>Ideally you&rsquo;d like everyone to keep their peering neat and tidy, but we&rsquo;re not in an ideal world unfortunately.  So I came up with a tool that will:</p>

<ul>
<li>Scan your message log for BGP opens from unconfigured neighbours</li>
<li>Scan your message log for TCP with unexpected MD5</li>
<li>Scan your firewall log for connections to port 179 that have been dropped</li>
</ul>

<p>This catches most instances and you end up with a list of IP address, the system then:</p>

<ul>
<li>Looks at the peering point data to see what ASN the IP address is assigned to</li>
<li>Checks PeeringDB for a peering contact for the ASN</li>
<li>Emails the peering contact based on the email template, which by default shows the peering LAN and IP addresses trying to open sessions</li>
</ul>

<h1 id="what-it-supports-right-now">What It Supports Right Now</h1>

<ul>
<li>JunOS 12.x - It may work with other versions of JunOS, but that&rsquo;s what it has been tested with.</li>
<li>SSH - Key based SSH for connecting to JunOS</li>
<li>LINX - Currently it is hard coded to work with LINX, The London Internet Exchange.</li>
<li>PeeringDB - Only PeeringDB is supported at the moment for fetching an AS numbers peering contacts</li>
<li>Email - Email is the current form of contact</li>
</ul>

<h1 id="what-it-can-support-right-now-if-you-want-to-write-a-module">What It Can Support Right Now If You Want To Write a Module?</h1>

<p>The router code is modularised and self contained, so any router or switch can be supported.</p>

<p>The router class includes what commands to execute to fetch and parse the data in to an IP address.  Additional commands are added in to an array.</p>

<h1 id="the-future">The Future</h1>

<p>The aim is to make a simple suite of tools for small ISPs without their own staff to better manage their peering relationships.  The next evolution will hopefully add tracking support, so it will log when you last emailed a given peer and allow you to set a time period for them to respond before it emails again.</p>

<h1 id="where-can-i-find-it">Where Can I Find It?</h1>

<p><a href="https://github.com/KarlAustin/peertools">https://github.com/KarlAustin/peertools</a></p>

<p>The code is currently still a little rough in places, as it was quickly built to deal with the 30 or so IPs hitting our peering routers every few seconds.  So far we&rsquo;ve had a couple of ISPs stop and several agree to peer with us.  Please feel to contribute or comment.</p>

  </div>

  <footer>
    <ul class="stats">
    
        

        
        
            <li>
                
                
                    

                    

                    

                    
                        Category
                    
                
            </li>
        
    

    
    
        <li><a href='/categoriesinternet'>Internet</a></li>
    
</ul>

  </footer>

</article>

    <article class="post">
        <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "karlaustin" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </article>


<ul class="actions pagination">
    
        <li><a href="/post/printer-sample-packs-and-fail/"
                class="button big previous">Sample Packs from Printing Companies</a></li>
    

    
        <li><a href="/post/ipv6-at-home-it-should-not-be-this-hard/"
                class="button big next">IPv6 at Home - It Should Not Be This Hard</a></li>
    
</ul>


    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
      
        <a href='/'><img src="/img/main/logo-150.jpg" class="intro-circle" width="" alt="Me: Karl Austin" /></a>
      
    
    
      <header>
        <h2>Me &amp; Life</h2>
        <p>Family, projects, passions and life in general</p>
      </header>
    
    
      <ul class="icons">
        
        
  <li><a href="//github.com/karlaustin" target="_blank" title="GitHub" class="fa fa-github"></a></li>















  <li><a href="//flickr.com/photos/21847971@N07" target="_blank" title="Flickr" class="fa fa-flickr"></a></li>



















  <li><a href="//facebook.com/karlpaustin" target="_blank" title="Facebook" class="fa fa-facebook"></a></li>





















  <li><a href="//instagram.com/karlaustin" target="_blank" title="Instagram" class="fa fa-instagram"></a></li>





  <li><a href="//twitter.com/karlaustin" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>














      </ul>
    
  </section>

  
  <section id="recent-posts">
    <div class="mini-posts">
      <header>
        <h3>Recent Posts</h3>
      </header>
      <div class="posts-container">
        

        
          
        

        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/post/juniper-vmx-centos-i40e-issues/">Juniper vMX CentOS i40e Driver Issues</a>
              </h3>
              
              <time class="published" datetime='2018-01-19'>
                January 19, 2018
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/post/negotiating-with-a-threenager/">Negotiating With A Threenager</a>
              </h3>
              
              <time class="published" datetime='2017-03-11'>
                March 11, 2017
              </time>
            </header>
            

          </article>
        
      </div>

      
        <a href=
          
            /post/
          
        class="button">View more posts</a>
      
    </div>
  </section>

  
  
  
  
    <section id="categories">
      <header>
        <h3>
          <a href="/categories/">Categories</a>
        </h3>
      </header>
        
          
        

        
        <p>
          <article>
            <header>
              
                <a href="/categories/internet/">Internet</a>
                <span style="float:right;">5</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/photography/">Photography</a>
                <span style="float:right;">2</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/websites/">Websites</a>
                <span style="float:right;">2</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/business/">Business</a>
                <span style="float:right;">1</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/life/">Life</a>
                <span style="float:right;">1</span>
              
            </header>
          </article>
        </p>
        
    </section>
  

  
  
    <section id="mini-bio">
      <h3>About</h1>
      <p>I'm Karl Austin, I live in Whitwell Derbyshire with my wife Karen and our son George.  I co-own KDA Web Services, we provide web hosting.  I also run Ilumia Images, a photography business as well as getting involved with community groups and events.</p>
      <a href="/about/" class="button">Learn More</a>
    </section>
  

  
  <section id="footer">
    
      <ul class="icons">
        
        
  <li><a href="//github.com/karlaustin" target="_blank" title="GitHub" class="fa fa-github"></a></li>















  <li><a href="//flickr.com/photos/21847971@N07" target="_blank" title="Flickr" class="fa fa-flickr"></a></li>



















  <li><a href="//facebook.com/karlpaustin" target="_blank" title="Facebook" class="fa fa-facebook"></a></li>





















  <li><a href="//instagram.com/karlaustin" target="_blank" title="Instagram" class="fa fa-instagram"></a></li>





  <li><a href="//twitter.com/karlaustin" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>














      </ul>
    
    <p class="copyright">
      
        &copy; 2018
        
          Me &amp; Life
        
      .
      Powered by <a href="//gohugo.io" target="_blank">Hugo</a>
    </p>
  </section>
</section>

    </div>
    <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
    

    
      
    

    
    
      <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script>
      <script src="/js/util.js"></script>
      <script src="/js/main.js"></script>
      <script src="/js/backToTop.js"></script>
    

    

    
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

