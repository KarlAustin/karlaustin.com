<!doctype html><html lang=en><head><meta charset=utf-8><title>Peertools: Automated notification of unsolicited BGP Open requests at peering points - Me & Life</title><meta name=description content="An automated tool for sending email notifications to ISPs sending BGP Open requests to your routers on a peering point."><meta name=viewport content="width=device-width,initial-scale=1"><meta name=twitter:card content="summary_large_image"><meta property="og:site_name" content="Me & Life"><meta property="og:title" content="Peertools: Automated notification of unsolicited BGP Open requests at peering points"><meta property="og:description" content="An automated tool for sending email notifications to ISPs sending BGP Open requests to your routers on a peering point."><meta property="og:type" content="article"><meta property="og:url" content="https://karlaustin.com/post/peertools-automating-notification-of-potential-peers/"><meta property="og:image" content="https://karlaustin.com/img/main/logo-150.jpg"><link rel="shortcut icon" href=/favicon.ico><meta name=generator content="Hugo 0.110.0"><link rel=stylesheet href=/css/bundle.min.5233f2a4cd515395301b4154f6c1c621695e8cf53faa0935b76ac52fed7f4585.css integrity="sha256-UjPypM1RU5UwG0FU9sHGIWlejPU/qgk1t2rFL+1/RYU="><link rel=stylesheet href=/css/add-on.css></head><body><header id=site-header><nav id=site-nav><h1 class=nav-title><a href=/ class=nav></a></h1><menu id=site-nav-menu class="flyout-menu menu"><a href=/post class="nav link">Blog</a>
<a href=/categories class="nav link">Categories</a>
<a href=/about class="nav link">About</a></menu>
<a href=#site-nav class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a></nav></header><div id=wrapper><section id=site-intro><a href=/><img src=/img/main/logo-150.jpg width=100 alt="Me: Karl Austin"></a><header><h1>Me & Life</h1></header><main><p>Family, projects, passions and life in general</p></main></section><main id=site-main><article><div class=post><header><div class=title><h2><a href=/post/peertools-automating-notification-of-potential-peers/>Peertools: Automated notification of unsolicited BGP Open requests at peering points</a></h2><p>An automated tool for sending email notifications to ISPs sending BGP Open requests to your routers on a peering point.</p></div><div class=meta><time datetime="2017-03-04 18:41:30 +0000 UTC">March 4, 2017</time><p>3-Minute Read</p></div></header><div id=socnet-share></div><div class=content><h1 id=the-problem>The Problem</h1><p>When you connect to an internet peering exchange, the IP addresses you&rsquo;re given for your interfaces will most likely have been used by someone else prior to you, that has left the exchange.</p><p>This means, because we&rsquo;re not all good at housekeeping, that you&rsquo;ll end up with ISPs trying to open up BGP sessions with your routers and if you&rsquo;re not firewalling them out then you&rsquo;ll end up with a lot of messages about BGP Opens being received from unconfigured neighbours. If you&rsquo;re firewalling (and you should be) and you&rsquo;re logging you&rsquo;ll end up with a lot of hits logged against port 179.</p><h1 id=the-solution>The Solution</h1><p>Ideally you&rsquo;d like everyone to keep their peering neat and tidy, but we&rsquo;re not in an ideal world unfortunately. So I came up with a tool that will:</p><ul><li>Scan your message log for BGP opens from unconfigured neighbours</li><li>Scan your message log for TCP with unexpected MD5</li><li>Scan your firewall log for connections to port 179 that have been dropped</li></ul><p>This catches most instances and you end up with a list of IP address, the system then:</p><ul><li>Looks at the peering point data to see what ASN the IP address is assigned to</li><li>Checks PeeringDB for a peering contact for the ASN</li><li>Emails the peering contact based on the email template, which by default shows the peering LAN and IP addresses trying to open sessions</li></ul><h1 id=what-it-supports-right-now>What It Supports Right Now</h1><ul><li>JunOS 12.x - It may work with other versions of JunOS, but that&rsquo;s what it has been tested with.</li><li>SSH - Key based SSH for connecting to JunOS</li><li>LINX - Currently it is hard coded to work with LINX, The London Internet Exchange.</li><li>PeeringDB - Only PeeringDB is supported at the moment for fetching an AS numbers peering contacts</li><li>Email - Email is the current form of contact</li></ul><h1 id=what-it-can-support-right-now-if-you-want-to-write-a-module>What It Can Support Right Now If You Want To Write a Module?</h1><p>The router code is modularised and self contained, so any router or switch can be supported.</p><p>The router class includes what commands to execute to fetch and parse the data in to an IP address. Additional commands are added in to an array.</p><h1 id=the-future>The Future</h1><p>The aim is to make a simple suite of tools for small ISPs without their own staff to better manage their peering relationships. The next evolution will hopefully add tracking support, so it will log when you last emailed a given peer and allow you to set a time period for them to respond before it emails again.</p><h1 id=where-can-i-find-it>Where Can I Find It?</h1><p><a href=https://github.com/KarlAustin/peertools>https://github.com/KarlAustin/peertools</a></p><p>The code is currently still a little rough in places, as it was quickly built to deal with the 30 or so IPs hitting our peering routers every few seconds. So far we&rsquo;ve had a couple of ISPs stop and several agree to peer with us. Please feel to contribute or comment.</p></div><footer><div class=stats><ul class=categories><li><a class=article-terms-link href=/categories/internet/>Internet</a></li></ul><ul class=tags><li><a class=article-terms-link href=/tags/internet/>internet</a></li><li><a class=article-terms-link href=/tags/peering/>peering</a></li><li><a class=article-terms-link href=/tags/linx/>linx</a></li><li><a class=article-terms-link href=/tags/bgp/>bgp</a></li></ul></div></footer></div><div class=post><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//karlaustin.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article><div class=pagination><a href=/post/ipv6-at-home-it-should-not-be-this-hard/ class="button left"><span>IPv6 at Home - It Should Not Be This Hard</span></a>
<a href=/post/printer-sample-packs-and-fail/ class="button right"><span>Sample Packs from Printing Companies</span></a></div></main><section id=site-sidebar><section id=recent-posts><header><h1>Recent Posts</h1></header><article class=mini-post><header><h2><a href=/post/editing-markdown-on-the-go/>Editing markdown on the go</a></h2><time class=published datetime="2023-03-01 00:00:00 +0000 UTC">March 1, 2023</time></header></article><article class=mini-post><header><h2><a href=/post/github-actions-and-workflows/>Github Actions and Workflows</a></h2><time class=published datetime="2023-02-28 00:00:00 +0000 UTC">February 28, 2023</time></header></article><article class=mini-post><header><h2><a href=/post/hello-again/>Hello again</a></h2><time class=published datetime="2023-02-28 00:00:00 +0000 UTC">February 28, 2023</time></header></article><article class=mini-post><header><h2><a href=/post/juniper-vmx-centos-i40e-issues/>Juniper vMX CentOS i40e Driver Issues</a></h2><time class=published datetime="2018-01-19 00:00:00 +0000 UTC">January 19, 2018</time></header></article><article class=mini-post><header><h2><a href=/post/negotiating-with-a-threenager/>Negotiating With A Threenager</a></h2><time class=published datetime="2017-03-11 19:55:20 +0000 UTC">March 11, 2017</time></header></article><footer><a href=/blog class=button>See More</a></footer></section><section id=categories><header><h1><a href=/categories>Categories</a></h1></header><ul><li><a href=/categories/internet/>internet<span class=count>5</span></a><li><a href=/categories/photography/>photography<span class=count>2</span></a><li><a href=/categories/websites/>websites<span class=count>2</span></a><li><a href=/categories/blogging/>blogging<span class=count>1</span></a><li><a href=/categories/business/>business<span class=count>1</span></a><li><a href=/categories/development/>development<span class=count>1</span></a><li><a href=/categories/general/>general<span class=count>1</span></a><li><a href=/categories/life/>life<span class=count>1</span></a></li></ul></section><section id=mini-bio><header><h1>About</h1></header><p>This theme was developed for Hugo static site generator.</p><footer><a href=/about class=button>Learn More</a></footer></section></section><footer id=site-footer><p class=copyright>Â© 2023 Me & Life<br>Theme: <a href=https://github.com/pacollins/hugo-future-imperfect-slim target=_blank rel=noopener>Hugo Future Imperfect Slim</a><br>A <a href=https://html5up.net/future-imperfect target=_blank rel=noopener>HTML5 UP port</a> | Powered by <a href=https://gohugo.io/ title=0.110.0 target=_blank rel=noopener>Hugo</a></p></footer><a id=back-to-top href=# class="fas fa-arrow-up fa-2x"></a>
<script src=/js/highlight.js></script>
<script>hljs.highlightAll()</script><script src=/js/bundle.min.264c62b2d798d1c6d28933f76015f64ca5ade337b93d27412420b18bce46b20e.js integrity="sha256-JkxisteY0cbSiTP3YBX2TKWt4ze5PSdBJCCxi85Gsg4="></script>
<script src=/js/add-on.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-75661737-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></div></body></html>