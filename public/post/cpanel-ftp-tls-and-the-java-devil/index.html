<!doctype html><html lang=en><head><meta charset=utf-8><title>cPanel - Broken FTPS (FTP over TLS) with Java Clients - Me & Life</title><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1"><meta name=twitter:card content="summary_large_image"><meta property="og:site_name" content="Me & Life"><meta property="og:title" content="cPanel - Broken FTPS (FTP over TLS) with Java Clients"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://karlaustin.com/post/cpanel-ftp-tls-and-the-java-devil/"><meta property="og:image" content="https://karlaustin.com/img/main/logo-150.jpg"><link rel="shortcut icon" href=/favicon.ico><meta name=generator content="Hugo 0.110.0"><link rel=stylesheet href=/css/bundle.min.5233f2a4cd515395301b4154f6c1c621695e8cf53faa0935b76ac52fed7f4585.css integrity="sha256-UjPypM1RU5UwG0FU9sHGIWlejPU/qgk1t2rFL+1/RYU="><link rel=stylesheet href=/css/add-on.css></head><body><header id=site-header><nav id=site-nav><h1 class=nav-title><a href=/ class=nav></a></h1><menu id=site-nav-menu class="flyout-menu menu"><a href=/post class="nav link">Blog</a>
<a href=/categories class="nav link">Categories</a>
<a href=/about class="nav link">About</a></menu>
<a href=#site-nav class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a></nav></header><div id=wrapper><section id=site-intro><a href=/><img src=/img/main/logo-150.jpg width=100 alt="Me: Karl Austin"></a><header><h1>Me & Life</h1></header><main><p>Family, projects, passions and life in general</p></main></section><main id=site-main><article><div class=post><header><div class=title><h2><a href=/post/cpanel-ftp-tls-and-the-java-devil/>cPanel - Broken FTPS (FTP over TLS) with Java Clients</a></h2></div><div class=meta><time datetime="2016-05-09 00:00:00 +0000 UTC">May 9, 2016</time><p>2-Minute Read</p></div></header><div id=socnet-share></div><div class=content><p>If you&rsquo;ve gone to edit your site and suddenly found that your chosen IDE won&rsquo;t connect to upload any more via FTPS (FTP using TLS encryption) and your web host runs cPanel, then chances are they&rsquo;re running v56 and your IDE is written in Java.</p><p>I hit this issue with another website late last week, where the DH params had already been re-generated to 2048 bit, but that change removed. Your IDE probably just says it can&rsquo;t connect, that&rsquo;s what JetBrains WebStorm and PhpStorm do although the logs did give more information:</p><p>NetBeans gave the game away sooner by giving the error from Java about DH parameters.</p><h2 id=weak-dh-keys>Weak DH Keys</h2><p>The root cause of the issue is a problem with weak Diffie-Hellman key sizes, widely reported as the Logjam attack. The recommendation is to move to 2048 bit prime number sizes which sounds brilliant, but then&mldr;.</p><h2 id=damn-you-java>Damn you Java</h2><p>Only Java 8 supports 2048bit DH params, v7 supports a maximum of 1024bit.</p><p>The big problem is that Java 8 supports only a <em>maximum</em> of 2048bit, this is where we hit an issue with cPanel v56.</p><h2 id=oops-cpanel>Oops cPanel</h2><p>It seems that on April 20th 2016 cPanel pushed out an update that generated new dhparams for pure-ftpd, but they didn&rsquo;t fully understand the warnings around Java, as they generated 3072 bit DH params, which you can verify with the following command:</p><p>You&rsquo;ll see output like the following:</p><p>As you can see, 3072 bit.</p><h2 id=fixing-it>Fixing it</h2><p>Fortunately the fix is easy:</p><p>We&rsquo;ve backed up the existing params just in case and generated new ones for pure-ftpd to use.</p><h2 id=will-it-break-again>Will it break again?</h2><p>That remains to be seen. The issue has been reported to cPanel, so hopefully it won&rsquo;t break as we&rsquo;re not just talking a few IDEs here like JetBrains, NetBeans etc. there are also countless ERP systems out there that use Java and a lot of them shuffle files (such as orders, tracking info for shipping) in and out via FTP with their customers and suppliers.</p></div><footer><div class=stats><ul class=categories><li><a class=article-terms-link href=/categories/internet/>Internet</a></li></ul><ul class=tags><li><a class=article-terms-link href=/tags/internet/>internet</a></li><li><a class=article-terms-link href=/tags/website/>website</a></li><li><a class=article-terms-link href=/tags/cpanel/>cpanel</a></li><li><a class=article-terms-link href=/tags/security/>security</a></li></ul></div></footer></div><div class=post><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//karlaustin.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article><div class=pagination><a href=/post/printer-sample-packs-and-fail/ class="button left"><span>Sample Packs from Printing Companies</span></a>
<a href=/post/facebook-claiming-a-page/ class="button right"><span>Claiming a Facebook Page - Nightmare!</span></a></div></main><section id=site-sidebar><section id=recent-posts><header><h1>Recent Posts</h1></header><article class=mini-post><header><h2><a href=/post/github-actions-and-workflows/>Github Actions and Workflows</a></h2><time class=published datetime="2023-02-28 00:00:00 +0000 UTC">February 28, 2023</time></header></article><article class=mini-post><header><h2><a href=/post/hello-again/>Hello again</a></h2><time class=published datetime="2023-02-28 00:00:00 +0000 UTC">February 28, 2023</time></header></article><article class=mini-post><header><h2><a href=/post/juniper-vmx-centos-i40e-issues/>Juniper vMX CentOS i40e Driver Issues</a></h2><time class=published datetime="2018-01-19 00:00:00 +0000 UTC">January 19, 2018</time></header></article><article class=mini-post><header><h2><a href=/post/negotiating-with-a-threenager/>Negotiating With A Threenager</a></h2><time class=published datetime="2017-03-11 19:55:20 +0000 UTC">March 11, 2017</time></header></article><article class=mini-post><header><h2><a href=/post/ipv6-at-home-it-should-not-be-this-hard/>IPv6 at Home - It Should Not Be This Hard</a></h2><time class=published datetime="2017-03-05 09:50:46 +0000 UTC">March 5, 2017</time></header></article><footer><a href=/blog class=button>See More</a></footer></section><section id=categories><header><h1><a href=/categories>Categories</a></h1></header><ul><li><a href=/categories/internet/>internet<span class=count>5</span></a><li><a href=/categories/photography/>photography<span class=count>2</span></a><li><a href=/categories/websites/>websites<span class=count>2</span></a><li><a href=/categories/business/>business<span class=count>1</span></a><li><a href=/categories/development/>development<span class=count>1</span></a><li><a href=/categories/general/>general<span class=count>1</span></a><li><a href=/categories/life/>life<span class=count>1</span></a></li></ul></section><section id=mini-bio><header><h1>About</h1></header><p>This theme was developed for Hugo static site generator.</p><footer><a href=/about class=button>Learn More</a></footer></section></section><footer id=site-footer><p class=copyright>Â© 2023 Me & Life<br>Theme: <a href=https://github.com/pacollins/hugo-future-imperfect-slim target=_blank rel=noopener>Hugo Future Imperfect Slim</a><br>A <a href=https://html5up.net/future-imperfect target=_blank rel=noopener>HTML5 UP port</a> | Powered by <a href=https://gohugo.io/ title=0.110.0 target=_blank rel=noopener>Hugo</a></p></footer><a id=back-to-top href=# class="fas fa-arrow-up fa-2x"></a>
<script src=/js/highlight.js></script>
<script>hljs.highlightAll()</script><script src=/js/bundle.min.264c62b2d798d1c6d28933f76015f64ca5ade337b93d27412420b18bce46b20e.js integrity="sha256-JkxisteY0cbSiTP3YBX2TKWt4ze5PSdBJCCxi85Gsg4="></script>
<script src=/js/add-on.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-75661737-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></div></body></html>