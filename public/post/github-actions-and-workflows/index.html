<!doctype html><html lang=en><head><meta charset=utf-8><title>Github Actions and Workflows - Me & Life</title><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1"><meta name=twitter:card content="summary_large_image"><meta property="og:site_name" content="Me & Life"><meta property="og:title" content="Github Actions and Workflows"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://karlaustin.com/post/github-actions-and-workflows/"><meta property="og:image" content="https://karlaustin.com/img/main/logo-150.jpg"><link rel="shortcut icon" href=/favicon.ico><meta name=generator content="Hugo 0.110.0"><link rel=stylesheet href=/css/bundle.min.5233f2a4cd515395301b4154f6c1c621695e8cf53faa0935b76ac52fed7f4585.css integrity="sha256-UjPypM1RU5UwG0FU9sHGIWlejPU/qgk1t2rFL+1/RYU="><link rel=stylesheet href=/css/add-on.css></head><body><header id=site-header><nav id=site-nav><h1 class=nav-title><a href=/ class=nav></a></h1><menu id=site-nav-menu class="flyout-menu menu"><a href=/post class="nav link">Blog</a>
<a href=/categories class="nav link">Categories</a>
<a href=/about class="nav link">About</a></menu>
<a href=#site-nav class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a></nav></header><div id=wrapper><section id=site-intro><a href=/><img src=/img/main/logo-150.jpg width=100 alt="Me: Karl Austin"></a><header><h1>Me & Life</h1></header><main><p>Family, projects, passions and life in general</p></main></section><main id=site-main><article><div class=post><header><div class=title><h2><a href=/post/github-actions-and-workflows/>Github Actions and Workflows</a></h2></div><div class=meta><time datetime="2023-02-28 00:00:00 +0000 UTC">February 28, 2023</time><p>2-Minute Read</p></div></header><div id=socnet-share></div><div class=content><p>As per my <a href=https://karlaustin.com/post/hello-again/ title="Hello Again">Hello Again</a> post I&rsquo;m looking at automating some of my content creation.</p><h2 id=the-current-state-of-play>The current state of play</h2><p>If you&rsquo;ve looked before, you&rsquo;ll know I use
<a href=https://gohugo.io target=_blank>Hugo</a>
to build my site.</p><p>That means I need to ask Hugo to build my site whenever I add some more content, which currently means:</p><ol><li>Get Hugo to build the content</li><li>Update my git repo with the new content</li><li>Push the repo to GitHub</li><li>GitHub fires a webhook that tells my site to pull down new content</li></ol><p>Don&rsquo;t shoot me, this was all build pre-workflow days.</p><h2 id=the-plan>The plan</h2><p>Have a workflow to do all of the above for me</p><h3 id=step-1>Step 1</h3><p>Get it to build and just fire the current webhook.</p><p>Wish me luck with it.</p><h4 id=attempt-1>Attempt 1</h4><p>Fail. I forgot my repo is so old that it was stil called master and not main, and I&rsquo;d put main in my workflow action.</p><h4 id=attempt-2>Attempt 2</h4><p>Fail. A few gotchas it seems with the examples given online for running Hugo builds as workflows. I needed to add:</p><pre tabindex=0><code>permissions:
  packages: read
</code></pre><p>To my workflow file for it to be able to pull down the docker image.</p><h4 id=attempt-3>Attempt 3</h4><p>Fail-ish. Ooops, only had it build an artefact to attach to the build, not actually commit the public directory back to the repo.</p><h4 id=attempt-4>Attempt 4</h4><p>Success-ish. All built and committed back to the repo, but for some reason my webhook for deploy is failing :/</p><h4 id=attempt-5>Attempt 5</h4><p>Success! Although I really need to commit to a different repo to avoid having to do a git pull after every git push.</p></div><footer><div class=stats><ul class=categories><li><a class=article-terms-link href=/categories/development/>Development</a></li></ul><ul class=tags><li><a class=article-terms-link href=/tags/me/>me</a></li><li><a class=article-terms-link href=/tags/dev/>dev</a></li><li><a class=article-terms-link href=/tags/git/>git</a></li><li><a class=article-terms-link href=/tags/github/>github</a></li></ul></div></footer></div><div class=post><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//karlaustin.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article><div class=pagination><a href=/post/hello-again/ class="button right"><span>Hello again</span></a></div></main><section id=site-sidebar><section id=recent-posts><header><h1>Recent Posts</h1></header><article class=mini-post><header><h2><a href=/post/github-actions-and-workflows/>Github Actions and Workflows</a></h2><time class=published datetime="2023-02-28 00:00:00 +0000 UTC">February 28, 2023</time></header></article><article class=mini-post><header><h2><a href=/post/hello-again/>Hello again</a></h2><time class=published datetime="2023-02-28 00:00:00 +0000 UTC">February 28, 2023</time></header></article><article class=mini-post><header><h2><a href=/post/juniper-vmx-centos-i40e-issues/>Juniper vMX CentOS i40e Driver Issues</a></h2><time class=published datetime="2018-01-19 00:00:00 +0000 UTC">January 19, 2018</time></header></article><article class=mini-post><header><h2><a href=/post/negotiating-with-a-threenager/>Negotiating With A Threenager</a></h2><time class=published datetime="2017-03-11 19:55:20 +0000 UTC">March 11, 2017</time></header></article><article class=mini-post><header><h2><a href=/post/ipv6-at-home-it-should-not-be-this-hard/>IPv6 at Home - It Should Not Be This Hard</a></h2><time class=published datetime="2017-03-05 09:50:46 +0000 UTC">March 5, 2017</time></header></article><footer><a href=/blog class=button>See More</a></footer></section><section id=categories><header><h1><a href=/categories>Categories</a></h1></header><ul><li><a href=/categories/internet/>internet<span class=count>5</span></a><li><a href=/categories/photography/>photography<span class=count>2</span></a><li><a href=/categories/websites/>websites<span class=count>2</span></a><li><a href=/categories/business/>business<span class=count>1</span></a><li><a href=/categories/development/>development<span class=count>1</span></a><li><a href=/categories/general/>general<span class=count>1</span></a><li><a href=/categories/life/>life<span class=count>1</span></a></li></ul></section><section id=mini-bio><header><h1>About</h1></header><p>This theme was developed for Hugo static site generator.</p><footer><a href=/about class=button>Learn More</a></footer></section></section><footer id=site-footer><p class=copyright>Â© 2023 Me & Life<br>Theme: <a href=https://github.com/pacollins/hugo-future-imperfect-slim target=_blank rel=noopener>Hugo Future Imperfect Slim</a><br>A <a href=https://html5up.net/future-imperfect target=_blank rel=noopener>HTML5 UP port</a> | Powered by <a href=https://gohugo.io/ title=0.110.0 target=_blank rel=noopener>Hugo</a></p></footer><a id=back-to-top href=# class="fas fa-arrow-up fa-2x"></a>
<script src=/js/highlight.js></script>
<script>hljs.highlightAll()</script><script src=/js/bundle.min.264c62b2d798d1c6d28933f76015f64ca5ade337b93d27412420b18bce46b20e.js integrity="sha256-JkxisteY0cbSiTP3YBX2TKWt4ze5PSdBJCCxi85Gsg4="></script>
<script src=/js/add-on.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-75661737-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></div></body></html>